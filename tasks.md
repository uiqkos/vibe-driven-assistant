# Статус задач по проекту Coding Agent

На основе требований из `t.md`.

## По ТЗ (обязательные требования)

- [x] **GitHub Actions workflows** — три workflow: `solve-issue.yml` (триггер на лейбл `ai-solve`), `review-pr.yml` (триггер на лейбл `ai-generated`), `iterate-pr.yml` (триггер на комментарий "Changes Requested"). Все передают секреты корректно.
- [x] **Code Agent CLI** — команды `solve`, `review`, `iterate`, `local-solve`, `agentic-solve`, `index`. Читает Issue, клонирует репо, генерирует код, коммитит, создаёт PR с лейблом `ai-generated`.
- [x] **AI Reviewer Agent** — анализирует diff PR, получает связанный Issue, проверяет статус CI checks, формирует XML-промпт, публикует structured review комментарий в PR.
- [x] **Проверка CI результатов** — `GitHubService.get_check_runs()` получает статусы проверок и передаёт в LLM как `<ci_status>`.
- [x] **Поддержка итераций** — Iterator считает циклы по маркеру "AI Code Review" в комментариях, лимит `max_iterations=3`, пишет "Max iterations reached" при превышении.
- [x] **Обработка ошибок и лимиты** — `MaxStepsError` для агентного цикла (30 шагов), retry с exponential backoff (3 попытки) в LLMService, graceful fallback в парсере AST.
- [x] **Dockerfile и docker-compose.yml** — Python 3.11-slim, git, `pip install -e .`, монтирование `.env`.
- [x] **README.md** — установка, конфигурация (все env-переменные), использование CLI, архитектура, Docker.
- [ ] **Инструменты качества кода** — настроить ruff, black, mypy в `pyproject.toml`. ТЗ прямо указывает: "ruff, black, mypy, pytest".
- [ ] **Тесты** — расширить покрытие. Сейчас только `test_basic.py` (6 юнит-тестов). Нужны тесты поведения агентов с моками сервисов.
- [ ] **Отчёт по работе агента и системы SDLC** — документ с анализом: процент успешных задач, количество итераций, примеры работы.
- [ ] **Примеры Issues и Pull Requests** — подготовить демонстрационные примеры работы системы на реальном репозитории.

## Дополнительный функционал (доп. баллы)

- [x] **Code Indexer** — AST-парсинг Python файлов, граф зависимостей, инкрементальное обновление по MD5, 6 tool-функций для агентов.
- [ ] **Разворачивание в облаке** — cloud.ru или Yandex Cloud. Docker-образ готов, нужна автоматизация деплоя.
- [ ] **Мультиагентность** - добавить агентов, которые выполняют сабтаски: подготовка контекста, аналитик, постановщик задачи и тд
## Минорные улучшения

- [ ] **CI/CD для самого агента** — добавить workflow с pytest и lint для проверки кода самого проекта (сейчас CI только для review чужих PR).
- [ ] **Документация** — добавить в README пошаговый пример полного цикла (Issue → PR → Review → Iteration), troubleshooting.
- [x] **Поллинг CI вместо sleep** — сейчас `review-pr.yml` ждёт 30 секунд захардкоженным `sleep`. Заменить на поллинг реального статуса CI.
- [x] **Описание PR после работы агента** — улучшить содержимое PR: добавить описание процесса, отчёт о проделанной работе, summary изменений.
- [ ] **Поддержка других языков** — сейчас code indexer работает только с Python (AST). Добавить парсинг для JS/TS, Go и др.
- [ ] **Проверить ревьювера** — протестировать качество review на реальных PR, убедиться что комментарии адекватны и полезны.
- [x] **Настроить триггеры** — проверить и доработать триггеры GitHub Actions (лейблы, события, условия запуска).
- [x] **RAG** — добавить retrieval-augmented generation для поиска по кодовой базе вместо передачи всех файлов в контекст.
- [x] **Удобный конфиг моделей** — вынести настройки моделей (имя, температура, max tokens, провайдер) в единый конфиг-файл (YAML/TOML) вместо разрозненных env-переменных.
- [x] **Reasoning при вызове тулзов** — добавить в промпт требование чтобы LLM на каждом шаге объясняла зачем вызывает инструмент и почему именно этот (chain-of-thought перед tool call).
- [x] Добавить тулзы для всяких grep и тд

# Plan
1. 